<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>REDCapDM</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<script>$(document).ready(function(){
    if (typeof $('[data-toggle="tooltip"]').tooltip === 'function') {
        $('[data-toggle="tooltip"]').tooltip();
    }
    if ($('[data-toggle="popover"]').popover === 'function') {
        $('[data-toggle="popover"]').popover();
    }
});
</script>
<style type="text/css">
.lightable-minimal {
border-collapse: separate;
border-spacing: 16px 1px;
width: 100%;
margin-bottom: 10px;
}
.lightable-minimal td {
margin-left: 5px;
margin-right: 5px;
}
.lightable-minimal th {
margin-left: 5px;
margin-right: 5px;
}
.lightable-minimal thead tr:last-child th {
border-bottom: 2px solid #00000050;
empty-cells: hide;
}
.lightable-minimal tbody tr:first-child td {
padding-top: 0.5em;
}
.lightable-minimal.lightable-hover tbody tr:hover {
background-color: #f5f5f5;
}
.lightable-minimal.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-classic {
border-top: 0.16em solid #111111;
border-bottom: 0.16em solid #111111;
width: 100%;
margin-bottom: 10px;
margin: 10px 5px;
}
.lightable-classic tfoot tr td {
border: 0;
}
.lightable-classic tfoot tr:first-child td {
border-top: 0.14em solid #111111;
}
.lightable-classic caption {
color: #222222;
}
.lightable-classic td {
padding-left: 5px;
padding-right: 5px;
color: #222222;
}
.lightable-classic th {
padding-left: 5px;
padding-right: 5px;
font-weight: normal;
color: #222222;
}
.lightable-classic thead tr:last-child th {
border-bottom: 0.10em solid #111111;
}
.lightable-classic.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-classic.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-classic-2 {
border-top: 3px double #111111;
border-bottom: 3px double #111111;
width: 100%;
margin-bottom: 10px;
}
.lightable-classic-2 tfoot tr td {
border: 0;
}
.lightable-classic-2 tfoot tr:first-child td {
border-top: 3px double #111111;
}
.lightable-classic-2 caption {
color: #222222;
}
.lightable-classic-2 td {
padding-left: 5px;
padding-right: 5px;
color: #222222;
}
.lightable-classic-2 th {
padding-left: 5px;
padding-right: 5px;
font-weight: normal;
color: #222222;
}
.lightable-classic-2 tbody tr:last-child td {
border-bottom: 3px double #111111;
}
.lightable-classic-2 thead tr:last-child th {
border-bottom: 1px solid #111111;
}
.lightable-classic-2.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-classic-2.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-material {
min-width: 100%;
white-space: nowrap;
table-layout: fixed;
font-family: Roboto, sans-serif;
border: 1px solid #EEE;
border-collapse: collapse;
margin-bottom: 10px;
}
.lightable-material tfoot tr td {
border: 0;
}
.lightable-material tfoot tr:first-child td {
border-top: 1px solid #EEE;
}
.lightable-material th {
height: 56px;
padding-left: 16px;
padding-right: 16px;
}
.lightable-material td {
height: 52px;
padding-left: 16px;
padding-right: 16px;
border-top: 1px solid #eeeeee;
}
.lightable-material.lightable-hover tbody tr:hover {
background-color: #f5f5f5;
}
.lightable-material.lightable-striped tbody tr:nth-child(even) {
background-color: #f5f5f5;
}
.lightable-material.lightable-striped tbody td {
border: 0;
}
.lightable-material.lightable-striped thead tr:last-child th {
border-bottom: 1px solid #ddd;
}
.lightable-material-dark {
min-width: 100%;
white-space: nowrap;
table-layout: fixed;
font-family: Roboto, sans-serif;
border: 1px solid #FFFFFF12;
border-collapse: collapse;
margin-bottom: 10px;
background-color: #363640;
}
.lightable-material-dark tfoot tr td {
border: 0;
}
.lightable-material-dark tfoot tr:first-child td {
border-top: 1px solid #FFFFFF12;
}
.lightable-material-dark th {
height: 56px;
padding-left: 16px;
padding-right: 16px;
color: #FFFFFF60;
}
.lightable-material-dark td {
height: 52px;
padding-left: 16px;
padding-right: 16px;
color: #FFFFFF;
border-top: 1px solid #FFFFFF12;
}
.lightable-material-dark.lightable-hover tbody tr:hover {
background-color: #FFFFFF12;
}
.lightable-material-dark.lightable-striped tbody tr:nth-child(even) {
background-color: #FFFFFF12;
}
.lightable-material-dark.lightable-striped tbody td {
border: 0;
}
.lightable-material-dark.lightable-striped thead tr:last-child th {
border-bottom: 1px solid #FFFFFF12;
}
.lightable-paper {
width: 100%;
margin-bottom: 10px;
color: #444;
}
.lightable-paper tfoot tr td {
border: 0;
}
.lightable-paper tfoot tr:first-child td {
border-top: 1px solid #00000020;
}
.lightable-paper thead tr:last-child th {
color: #666;
vertical-align: bottom;
border-bottom: 1px solid #00000020;
line-height: 1.15em;
padding: 10px 5px;
}
.lightable-paper td {
vertical-align: middle;
border-bottom: 1px solid #00000010;
line-height: 1.15em;
padding: 7px 5px;
}
.lightable-paper.lightable-hover tbody tr:hover {
background-color: #F9EEC1;
}
.lightable-paper.lightable-striped tbody tr:nth-child(even) {
background-color: #00000008;
}
.lightable-paper.lightable-striped tbody td {
border: 0;
}
</style>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">REDCapDM</h1>


<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span>
<strong>Introduction</strong></a></li>
<li><a href="#functions"><span class="toc-section-number">2</span>
<strong>Functions</strong></a></li>
<li><a href="#built-in-dataset"><span class="toc-section-number">3</span> <strong>Built-in
dataset</strong></a></li>
<li><a href="#examples"><span class="toc-section-number">4</span>
<strong>Examples</strong></a>
<ul>
<li><a href="#read-data"><span class="toc-section-number">4.1</span>
<strong>Read data</strong></a>
<ul>
<li><a href="#redcap_data"><span class="toc-section-number">4.1.1</span>
<strong>redcap_data</strong></a></li>
</ul></li>
<li><a href="#preprocess"><span class="toc-section-number">4.2</span>
<strong>Preprocess</strong></a>
<ul>
<li><a href="#rd_transform"><span class="toc-section-number">4.2.1</span>
<strong>rd_transform</strong></a>
<ul>
<li><a href="#data-transformation"><span class="toc-section-number">4.2.1.1</span> <em>Data
transformation</em></a></li>
<li><a href="#data-transformation-and-classification-by-event"><span class="toc-section-number">4.2.1.2</span> <em>Data transformation and
classification by event</em></a></li>
<li><a href="#data-transformation-and-classification-by-form"><span class="toc-section-number">4.2.1.3</span> <em>Data transformation and
classification by form</em></a></li>
<li><a href="#additional-arguments"><span class="toc-section-number">4.2.1.4</span> <em>Additional
arguments</em></a></li>
</ul></li>
<li><a href="#rd_rlogic"><span class="toc-section-number">4.2.2</span>
<strong>rd_rlogic</strong></a></li>
<li><a href="#rd_insert_na"><span class="toc-section-number">4.2.3</span>
<strong>rd_insert_na</strong></a></li>
</ul></li>
<li><a href="#queries"><span class="toc-section-number">4.3</span>
<strong>Queries</strong></a>
<ul>
<li><a href="#rd_query"><span class="toc-section-number">4.3.1</span>
<strong>rd_query</strong></a>
<ul>
<li><a href="#output"><span class="toc-section-number">4.3.1.1</span>
<em>Output</em></a></li>
<li><a href="#missings"><span class="toc-section-number">4.3.1.2</span>
<em>Missings</em></a></li>
<li><a href="#missings-of-variables-with-a-branching-logic"><span class="toc-section-number">4.3.1.3</span> <em>Missings of variables with
a branching logic</em></a></li>
<li><a href="#expressions"><span class="toc-section-number">4.3.1.4</span> <em>Expressions</em></a></li>
<li><a href="#special-cases"><span class="toc-section-number">4.3.1.5</span> <em>Special
cases</em></a></li>
<li><a href="#additional-arguments-1"><span class="toc-section-number">4.3.1.6</span> <em>Additional
arguments</em></a></li>
</ul></li>
<li><a href="#rd_event"><span class="toc-section-number">4.3.2</span>
<strong>rd_event</strong></a></li>
<li><a href="#check_queries"><span class="toc-section-number">4.3.3</span>
<strong>check_queries</strong></a></li>
</ul></li>
</ul></li>
</ul>
</div>

<p><br> <br></p>
<div id="introduction" class="section level1" number="1">
<h1><span class="header-section-number">1</span>
<strong>Introduction</strong></h1>
<p>The REDCapDM package allows users to read data exported directly from
REDCap or via API connection. It also allows users to preprocess the
previously downloaded data, create reports of queries such as outliers
or missing values and track the identified queries.</p>
<p><br> <br></p>
</div>
<div id="functions" class="section level1" number="2">
<h1><span class="header-section-number">2</span>
<strong>Functions</strong></h1>
<p>Functions included in the package:</p>
<ul>
<li><p><u>redcap_data</u>: reads data.</p></li>
<li><p><u>rd_transform</u>: pre-processes data.</p></li>
<li><p><u>rd_rlogic</u>: transforms REDCap logic into R logic.</p></li>
<li><p><u>rd_insert_na</u>: allows a manual entry of a missing value in
specific variables using a filter.</p></li>
<li><p><u>rd_query</u>: identifies queries.</p></li>
<li><p><u>rd_event</u>: identifies missing events.</p></li>
<li><p><u>check_queries</u>: tracks queries.</p></li>
</ul>
<p><br> <br></p>
</div>
<div id="built-in-dataset" class="section level1" number="3">
<h1><span class="header-section-number">3</span> <strong>Built-in
dataset</strong></h1>
<p>For the following examples, we will use a random sample of the
COVICAN study which is included in the package. COVICAN is an
international, multicentre cohort study of cancer patients with COVID-19
to describe the epidemiology, risk factors, and clinical outcomes of
co-infections and superinfections in onco-hematological patients with
COVID-19.</p>
<p>We can load the built-in dataset by typing:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(covican)</span></code></pre></div>
<p>The structure of this dataset is:</p>
<pre><code>List of 3
 $ data      :&#39;data.frame&#39;: 342 obs. of  56 variables:
 $ dictionary:&#39;data.frame&#39;: 21 obs. of  8 variables:
 $ event_form:&#39;data.frame&#39;: 9 obs. of  3 variables:</code></pre>
<p>The first element in the list is a data frame containing all the
data. The second element is a data frame with the information in the
dictionary of the project about each field. The third and final element
is a data frame containing the correspondence of each event with each
form.</p>
<p>Some of the variables in the dataset are:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;">
Name
</th>
<th style="text-align:left;font-weight: bold;">
Description
</th>
<th style="text-align:left;font-weight: bold;">
Categories
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
record_id
</td>
<td style="text-align:left;">
Identifier of each record
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
redcap_event_name
</td>
<td style="text-align:left;">
Auto-generated name of the events
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
redcap_data_access_group
</td>
<td style="text-align:left;">
Auto-generated name of each center
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
inc_1
</td>
<td style="text-align:left;">
Patients older than 18 years
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
inc_2
</td>
<td style="text-align:left;">
Cancer patients
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
inc_3
</td>
<td style="text-align:left;">
Diagnosed of COVID-19
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
exc_1
</td>
<td style="text-align:left;">
Solid tumour remission &gt;1 year
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
screening_fail_crit
</td>
<td style="text-align:left;">
Indicator of non-compliance with inclusion and exclusion criteria
</td>
<td style="text-align:left;">
Compliance ; Non-compliance
</td>
</tr>
<tr>
<td style="text-align:left;">
d_birth
</td>
<td style="text-align:left;">
Date of birth (y-m-d)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
d_admission
</td>
<td style="text-align:left;">
Date of first visit (y-m-d)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
age
</td>
<td style="text-align:left;">
Age
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
dm
</td>
<td style="text-align:left;">
Indicator of diabetes
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
type_dm
</td>
<td style="text-align:left;">
Type of diabetes
</td>
<td style="text-align:left;">
No complications ; End-organ diabetes-related disease
</td>
</tr>
<tr>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
Indicator of chronic pulmonary disease
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
fio2
</td>
<td style="text-align:left;">
Fraction of inspired oxygen (%)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
available_analytics
</td>
<td style="text-align:left;">
Indicator of blood test available
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
potassium
</td>
<td style="text-align:left;">
Potassium (mmol/L)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
resp_rate
</td>
<td style="text-align:left;">
Respiratory rate (bpm)
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
leuk_lymph
</td>
<td style="text-align:left;">
Indicator of leukemia or lymphoma
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
<tr>
<td style="text-align:left;">
acute_leuk
</td>
<td style="text-align:left;">
Indicator of acute leukemia
</td>
<td style="text-align:left;">
No ; Yes
</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="examples" class="section level1" number="4">
<h1><span class="header-section-number">4</span>
<strong>Examples</strong></h1>
<p>The package structure can be divided into three main components:
reading raw data, preprocessing data and identifying queries. Typically,
after collecting data in REDCap, we will have to follow this three
components in order to have a final validated dataset for analysis. We
will provide a complete user guide on how to perform each one of these
steps using the package’s functions. For the preprocessing of the data
and query identification, we will use the built-in dataset as an
example.</p>
<div id="read-data" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> <strong>Read
data</strong></h2>
<div id="redcap_data" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span>
<strong>redcap_data</strong></h3>
<p>The <code>redcap_data</code> function allows users to easily import
data from a REDCap project into R for analysis.</p>
<p>To read exported data from REDCap, use the arguments
<code>data_path</code> and <code>dic_path</code> to, respectively,
describe the path of the R file and the REDCap project’s dictionary:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">redcap_data</span>(<span class="at">data_path=</span><span class="st">&quot;C:/Users/username/example.r&quot;</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">dic_path=</span><span class="st">&quot;C:/Users/username/example_dictionary.csv&quot;</span>)</span></code></pre></div>
<p>Note: The R and CSV files exported from REDCap must be located in the
same directory.</p>
<p>If the REDCap project is longitudinal (contains more than one event)
then a third element should be specified with the correspondence of each
event with each form of the project. This csv file can be downloaded in
the REDCap of the project following these steps: <em>Project Setup</em>
&lt; <em>Designate Instruments for My Events</em> &lt; <em>Download
instrument-event mappings (CSV)</em>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">redcap_data</span>(<span class="at">data_path=</span><span class="st">&quot;C:/Users/username/example.r&quot;</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">dic_path=</span><span class="st">&quot;C:/Users/username/example_dictionary.csv&quot;</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">event_path=</span><span class="st">&quot;C:/Users/username/events.csv&quot;</span>)</span></code></pre></div>
<p>Note: if the project is longitudinal and the event-form file is not
provided using the <code>event_path</code> argument, some steps of the
preprocessment can not be performed.</p>
<p>Another way to read data exported from a REDCap project is using an
API connection. To do this, we can use the arguments <code>uri</code>
and <code>token</code> which respectively refer to the uniform resource
identifier of the REDCap project and the user-specific string that
serves as the password:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>dataset_api <span class="ot">&lt;-</span> <span class="fu">redcap_data</span>(<span class="at">uri =</span><span class="st">&quot;https://redcap.idibell.cat/api/&quot;</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">token =</span> <span class="st">&quot;55E5C3D1E83213ADA2182A4BFDEA&quot;</span>)</span></code></pre></div>
<p>In this case, there is no need to specify the event-form file since
the function will download it automatically using the API connection, if
the project is longitudinal.</p>
<p>This function returns a list with 3 elements (imported data,
dictionary and event-form mapping) which can then be used for further
analysis or visualization.</p>
</div>
</div>
<div id="preprocess" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span>
<strong>Preprocess</strong></h2>
<div id="rd_transform" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span>
<strong>rd_transform</strong></h3>
<p>The main function involved in the preprocessing of the data is
<code>rd_transform</code>. This function is used to preprocess the
REDCap data read into R using the <code>redcap_data</code>, as described
above. Using the arguments of the function we can perform different type
of transformations of our data.</p>
<p>As previously stated, we will use the built-in dataset
<code>covican</code> as an example.</p>
<div id="data-transformation" class="section level4" number="4.2.1.1">
<h4><span class="header-section-number">4.2.1.1</span> <em>Data
transformation</em></h4>
<p>The only necessary elements that must be provided are the dataset to
be transformed and the corresponding dictionary. If the project is
longitudinal, as in the case of <code>covican</code>, also the
event-form dataset should be specified. These elements can be specified
directly using the output of the <code>redcap_data</code> function or
separately in different arguments.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Option A: list object </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>covican_transformed <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Option B: separately with different arguments</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>covican_transformed <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(<span class="at">data =</span> covican<span class="sc">$</span>data, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">dic =</span> covican<span class="sc">$</span>dictionary, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">event_form =</span> covican<span class="sc">$</span>event_form)</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Print the results of the transformation</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>covican_transformed<span class="sc">$</span>results</span></code></pre></div>
<pre><code>1. Recalculating calculated fields and saving them as &#39;[field_name]_recalc&#39;

| Total calculated fields | Non-transcribed fields | Recalculated different fields |
|:-----------------------:|:----------------------:|:-----------------------------:|
|            2            |         0 (0%)         |            1 (50%)            |


|     field_name      | Transcribed? | Is equal? |
|:-------------------:|:------------:|:---------:|
|         age         |     Yes      |   FALSE   |
| screening_fail_crit |     Yes      |   TRUE    |

2. Transforming checkboxes: changing their values to No/Yes and changing their names to the names of its options. For checkboxes that have a branching logic, when the logic is missing their values will be set to missing

Table: Checkbox variables advisable to be reviewed

| Variables without any branching logic |
|:-------------------------------------:|
|        type_underlying_disease        |

3. Replacing original variables for their factor version

4. Deleting variables that contain some patterns</code></pre>
<p>This function will return a list with the transformed dataset,
dictionary and the output of the results of the transformation.</p>
<p>As we can see, there are 4 steps in the transformation:</p>
<ol>
<li>
<u>Recalculation of REDCap calculated fields:</u> it finds all the
calculated fields and recalculates them using the REDCap logic specified
in the calculation field translated into R. The recalculated variable is
saved as the original name adding ’_recalc’ at the end. It can happen
that the logic found contains some specific smart-variables or other
complex structures which the function is not able to transcribe. With
the summary found in <code>results</code> we can see how many calculated
fields have been found, if they have been transcribed and, if that is
the case, if the recalculated variable is equal to the original one.
</li>
<p>Note: If the REDCap project is longitudinal and the event-form is not
specified, this step will not be executed.</p>
<p>In the example, we can see how there are two REDCap calculated
fields, both have been transcribed successfully and the recalculation of
the age does not match the original calculated variable from REDCap.</p>
<li>
<u>Checkbox transformation:</u> by default, it changes the names of the
checkboxes to the name of its corresponding option and the name of their
labels to ‘No/Yes’. If we want to specify another pair of label names we
can specify them using the <code>checkbox_labels</code> argument as we
will see. Furthermore, if the checkbox contains a branching logic, when
this logic evaluated returns a missing value (some of the variables
specified in it are missing) the values of the checkbox will be set to
missing.
</li>
<p>Note: If the REDCap project is longitudinal and the event-form is not
specified, the evaluations of the branching logic will not be done.</p>
<p>For example, let’s explain the transformation that undergo the
variables corresponding to the checkbox field of the type of underlying
disease. The variables were named originally as
_type_underlying_disease__<em>0</em> and
_type_underlying_disease__<em>1</em> although the name of the options
are ‘Haematological cancer’ and ‘Solid tumour’. Thus, in the transformed
dataset, the names are converted to
<em>type_underlying_disease_haematological_cancer</em> and
<em>type_underlying_disease_solid_tumour</em>. Then, since this checkbox
variable does not have a branching logic, the variable is advised to be
reviewed by the user in the <code>results</code>, as seen above. When
reviewed we could use an additional function <code>rd_insert_na</code>
to insert the necessary missing values into this variable, as we will
explain later. If a branching logic was found for this variable,
<code>rd_transform</code> will insert automatically the missing values
when the logic is not satisfied and no further transformation will be
needed.</p>
<li>
<u>Replacement of the original variable by its factor version:</u>
REDCap creates two versions of the variables in the dataset for
multiple-choice fields: a numerical one with the number that corresponds
to each category and a factor one containing the labels of each
category. In this step, we will replace the original variables with
their factor versions, except for <em>redcap_event_name</em> and
<em>redcap_data_access_group</em>, for which we will keep both versions.
We can specify other variables that we do not want to transform to
factor using the argument <code>exclude_to_factor</code> which we will
see later.
</li>
<li>
<u>Elimination of variables containing some pattern:</u> by default, the
pattern that the function looks for is ’_complete’ and ’_timestamp’. We
can specify any other pattern using the argument
<code>delete_vars</code>, as explained later.
</li>
<p>In this case, we do not have any variable with the pattern
’_complete’ and ’_timestamp’ since the built-in dataset only contains a
sample of the variables of the project. All REDCap projects, when
downloaded, contain one variable with the pattern ’_complete’ for each
form indicating if the form has been marked as
incomplete/unverified/completed. Also, if the project contains some
survey then variables ending with ’_timestamp’ are also generated
automatically. In general, we do not need this information so these
variables are removed by default.</p>
</ol>
</div>
<div id="data-transformation-and-classification-by-event" class="section level4" number="4.2.1.2">
<h4><span class="header-section-number">4.2.1.2</span> <em>Data
transformation and classification by event</em></h4>
<p>Additionally, we can change the final structure of the transformed
dataset. For example, we can split it by each event. This can be done by
specifying in the <code>final_format</code> argument that we want our
data to be split by event.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">final_format =</span> <span class="st">&quot;by_event&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#To print the results</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>results</span></code></pre></div>
<pre><code>1. Recalculating calculated fields and saving them as &#39;[field_name]_recalc&#39;

| Total calculated fields | Non-transcribed fields | Recalculated different fields |
|:-----------------------:|:----------------------:|:-----------------------------:|
|            2            |         0 (0%)         |            1 (50%)            |


|     field_name      | Transcribed? | Is equal? |
|:-------------------:|:------------:|:---------:|
|         age         |     Yes      |   FALSE   |
| screening_fail_crit |     Yes      |   TRUE    |

2. Transforming checkboxes: changing their values to No/Yes and changing their names to the names of its options. For checkboxes that have a branching logic, when the logic is missing their values will be set to missing

Table: Checkbox variables advisable to be reviewed

| Variables without any branching logic |
|:-------------------------------------:|
|        type_underlying_disease        |

3. Replacing original variables for their factor version

4. Deleting variables that contain some patterns

5. Final arrangment of the data by event</code></pre>
<p>Now, a final step in the transformation has been added, which
consists in splitting the data according to the events in the study. So,
now the transformed dataset found in the output of the function is a
tibble object with as many data frames as events there are in the REDCap
project:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>data</span></code></pre></div>
<pre><code># A tibble: 2 × 3
  events                   vars       df             
  &lt;chr&gt;                    &lt;list&gt;     &lt;list&gt;         
1 baseline_visit_arm_1     &lt;chr [36]&gt; &lt;df [190 × 36]&gt;
2 follow_up_visit_da_arm_1 &lt;chr [8]&gt;  &lt;df [152 × 8]&gt; </code></pre>
<p>The column <code>df</code> of the nested dataframe is a list
containing the data corresponding to each event. Also the variables of
the forms that are found in each event are reported in the column
<code>vars</code>.</p>
<p>Note: If the REDCap project is longitudinal and the event-form is not
specified, this transformation is not posible.</p>
</div>
<div id="data-transformation-and-classification-by-form" class="section level4" number="4.2.1.3">
<h4><span class="header-section-number">4.2.1.3</span> <em>Data
transformation and classification by form</em></h4>
<p>Another option is to split the data by the forms found in the REDCap
project. We will use also the <code>final_format</code> argument to
specify that we want to split data by form:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">final_format =</span> <span class="st">&quot;by_form&quot;</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">#To print the results</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>results</span></code></pre></div>
<pre><code>1. Recalculating calculated fields and saving them as &#39;[field_name]_recalc&#39;

| Total calculated fields | Non-transcribed fields | Recalculated different fields |
|:-----------------------:|:----------------------:|:-----------------------------:|
|            2            |         0 (0%)         |            1 (50%)            |


|     field_name      | Transcribed? | Is equal? |
|:-------------------:|:------------:|:---------:|
|         age         |     Yes      |   FALSE   |
| screening_fail_crit |     Yes      |   TRUE    |

2. Transforming checkboxes: changing their values to No/Yes and changing their names to the names of its options. For checkboxes that have a branching logic, when the logic is missing their values will be set to missing

Table: Checkbox variables advisable to be reviewed

| Variables without any branching logic |
|:-------------------------------------:|
|        type_underlying_disease        |

3. Replacing original variables for their factor version

4. Deleting variables that contain some patterns
5. Final arrangment of the data by form</code></pre>
<p>As before, a final step in the transformation has been added, which
is to split the data according to the forms in the study. Thus, the
transformed dataset will now be a tibble object with as many data frames
as forms there are in the REDCap project:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>dataset<span class="sc">$</span>data</span></code></pre></div>
<pre><code># A tibble: 7 × 4
  form                        events    vars       df             
  &lt;chr&gt;                       &lt;list&gt;    &lt;list&gt;     &lt;list&gt;         
1 inclusionexclusion_criteria &lt;chr [1]&gt; &lt;chr [11]&gt; &lt;df [190 × 11]&gt;
2 demographics                &lt;chr [1]&gt; &lt;chr [9]&gt;  &lt;df [190 × 9]&gt; 
3 comorbidities               &lt;chr [1]&gt; &lt;chr [10]&gt; &lt;df [190 × 10]&gt;
4 cancer                      &lt;chr [1]&gt; &lt;chr [16]&gt; &lt;df [190 × 16]&gt;
5 vital_signs                 &lt;chr [2]&gt; &lt;chr [7]&gt;  &lt;df [177 × 7]&gt; 
6 laboratory_findings         &lt;chr [2]&gt; &lt;chr [7]&gt;  &lt;df [177 × 7]&gt; 
7 microbiological_studies     &lt;chr [1]&gt; &lt;chr [6]&gt;  &lt;df [190 × 6]&gt; </code></pre>
<p>Note: If the REDCap project is longitudinal and the event-form is not
specified, this transformation is not posible.</p>
</div>
<div id="additional-arguments" class="section level4" number="4.2.1.4">
<h4><span class="header-section-number">4.2.1.4</span> <em>Additional
arguments</em></h4>
<p>There are other arguments which can be used to customize some of the
transformation steps that the function performs by default:</p>
<p><br></p>
<p><u>checkbox_labels</u>: specifies the name of the categories for the
checkbox variables. Default is ‘No/Yes’, but we can change it to
‘N/Y’:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">checkbox_labels =</span> <span class="fu">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;Y&quot;</span>))</span></code></pre></div>
<p><br></p>
<p><u>checkbox_na</u>: logical argument involved in the transformation
of checkbox variables. For checkbox variables that have a branching
logic specified, when the logic is missing the values of the checkbox
will be always converted to missing. Additionally, if this argument is
true then also when the branching logic isn’t satisfied their values
will be converted to missing.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">checkbox_na =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><br></p>
<p><u>exclude_to_factor</u>: specifies the name of the variables that we
do not want to transform into a factor. For example, if we want the
variable <em>dm</em> to keep its original numeric version:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">exclude_to_factor =</span> <span class="st">&quot;dm&quot;</span>)</span></code></pre></div>
<p><br></p>
<p><u>keep_labels</u>: logical argument, retains the labeling of the
dataset columns from REDCap. By default, the function will remove the
labels of the dataset and the labels can be found in the dictionary:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">keep_labels =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dataset<span class="sc">$</span>data[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>])</span></code></pre></div>
<pre><code>&#39;data.frame&#39;:   342 obs. of  2 variables:
 $ record_id        : &#39;labelled&#39; chr  &quot;100-13&quot; &quot;100-13&quot; &quot;100-16&quot; &quot;100-16&quot; ...
  ..- attr(*, &quot;label&quot;)= Named chr &quot;Record ID&quot;
  .. ..- attr(*, &quot;names&quot;)= chr &quot;record_id&quot;
 $ redcap_event_name: &#39;labelled&#39; chr  &quot;baseline_visit_arm_1&quot; &quot;follow_up_visit_da_arm_1&quot; &quot;baseline_visit_arm_1&quot; &quot;follow_up_visit_da_arm_1&quot; ...
  ..- attr(*, &quot;label&quot;)= Named chr &quot;Event Name&quot;
  .. ..- attr(*, &quot;names&quot;)= chr &quot;redcap_event_name&quot;</code></pre>
<p><br></p>
<p><u>delete_vars</u>: every variable containing the strings specified
in this argument will be removed from the dataset. By default, the value
of <code>delete_vars</code> is ‘_complete’. For example, we can change
the argument to remove the inclusion and exclusion criteria variables
from the dataset (variables that contain ‘inc_’ and ‘exc_’ in their
names):</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">delete_vars =</span> <span class="fu">c</span>(<span class="st">&quot;inc_&quot;</span>, <span class="st">&quot;exc_&quot;</span>))</span></code></pre></div>
<p><br></p>
<p><u>which_event</u>: in the transformation by event explained earlier,
we can specify whether we want to keep only one out of all the events in
the dataset. For example, if we only want to keep the baseline
visit:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">final_format =</span> <span class="st">&quot;by_event&quot;</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">which_event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span></code></pre></div>
<p><br></p>
<p><u>which_form</u>: in the transformation by form explained earlier,
we can specify whether we want to keep only one of the forms. For
example, if we only want to keep the demographic form:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">final_format =</span> <span class="st">&quot;by_form&quot;</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">which_form =</span> <span class="st">&quot;demographics&quot;</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> dataset<span class="sc">$</span>data</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)</span></code></pre></div>
<pre><code>[1] &quot;record_id&quot;                       &quot;redcap_event_name&quot;              
[3] &quot;redcap_data_access_group&quot;        &quot;redcap_event_name.factor&quot;       
[5] &quot;redcap_data_access_group.factor&quot; &quot;d_admission&quot;                    
[7] &quot;d_birth&quot;                         &quot;age&quot;                            
[9] &quot;age_recalc&quot;                     </code></pre>
<p><br></p>
<p><u>wide</u>: in the transformation by form, we can specify that we
want each of the split datasets to be in a wide format. This is useful
if the form appears in more than one event (or in a repeated event).
Then, we will only have one row per patient and all the variables of the
form will be in columns repeated by each event in the order that the
events appear in REDCap. For example, if we want to keep only the
laboratory findings in a wide format we can do:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">final_format =</span> <span class="st">&quot;by_form&quot;</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">which_form =</span> <span class="st">&quot;laboratory_findings&quot;</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">wide =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dataset<span class="sc">$</span>data)</span></code></pre></div>
<pre><code># A tibble: 6 × 5
  record_id available_analytics_1 available_analytics_2 potassium_1 potassium_2
  &lt;chr&gt;     &lt;fct&gt;                 &lt;fct&gt;                       &lt;dbl&gt;       &lt;dbl&gt;
1 100-13    Yes                   Yes                          3.66        4.1 
2 100-16    Yes                   No                           4.04       NA   
3 100-31    Yes                   &lt;NA&gt;                         4.58       NA   
4 100-34    Yes                   No                           3.48       NA   
5 100-36    Yes                   No                           4.09       NA   
6 100-52    Yes                   Yes                          3.7         7.15</code></pre>
<p><br></p>
</div>
</div>
<div id="rd_rlogic" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span>
<strong>rd_rlogic</strong></h3>
<p>This function transforms the REDCap logic into logic that can be
evaluated in R. It returns both the transformed logic and the result of
the evaluation of the logic. This function is used in the
<code>rd_transform</code> to recalculate the calculate fields, but it
may also be useful to use it in other circunstances. Let’s see how it
transforms the logic of one of the calculated fields in the built-in
dataset:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>logic_trans <span class="ot">&lt;-</span> <span class="fu">rd_rlogic</span>(covican,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">logic =</span> <span class="st">&quot;if([exc_1]=&#39;1&#39; or [inc_1]=&#39;0&#39; or [inc_2]=&#39;0&#39; or [inc_3]=&#39;0&#39;,1,0)&quot;</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">var =</span> <span class="st">&quot;screening_fail_crit&quot;</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(logic_trans)</span></code></pre></div>
<pre><code>List of 2
 $ rlogic: chr &quot;ifelse(data$exc_1==&#39;1&#39; | data$inc_1==&#39;0&#39; | data$inc_2==&#39;0&#39; | data$inc_3==&#39;0&#39;,1,0)&quot;
 $ eval  : num [1:342] 0 NA 0 NA 0 NA 0 NA 0 NA ...</code></pre>
<p><br></p>
</div>
<div id="rd_insert_na" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span>
<strong>rd_insert_na</strong></h3>
<p>This function sets some values of a variable to missing if a certain
logic is fulfilled. It can be used as a complementary function for
<code>rd_transform</code>, for example, to change the values of those
checkboxes that do not have a branching logic, as mentioned earlier. For
instance, we can perform a raw transformation of our data, as in section
4.2.1.1, and then use this function to set the values of the checkbox
<em>type_underlying_disease_haematological_cancer</em> to missing when
the age is less than 65 years old:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Raw transformation of the data:</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>dataset <span class="ot">&lt;-</span> <span class="fu">rd_transform</span>(covican)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> dataset<span class="sc">$</span>data</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Before inserting missings</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>type_underlying_disease_haematological_cancer)</span></code></pre></div>
<pre><code>
 No Yes 
103  87 </code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Run the function</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">rd_insert_na</span>(dataset,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">event_form =</span> covican<span class="sc">$</span>event_form,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">vars =</span> <span class="st">&quot;type_underlying_disease_haematological_cancer&quot;</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">filter =</span> <span class="st">&quot;age &lt; 65&quot;</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#After inserting missings</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data2<span class="sc">$</span>type_underlying_disease_haematological_cancer)</span></code></pre></div>
<pre><code>
 No Yes 
 65  50 </code></pre>
<p>Recall that both the variable to be transformed (<em>age</em>) and
the variable included in the filter
(<em>type_underlying_disease_haematological_cancer</em>) are in the same
event. In the contrary, if the variable to be transformed and the filter
didn’t have any event in common then the transformation would give an
error. Furthermore, if the variable to be transformed was in more events
than the filter, only the rows of the events in common would be
converted.</p>
<p><br></p>
</div>
</div>
<div id="queries" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span>
<strong>Queries</strong></h2>
<p>Queries are very important to ensure the accuracy and reliability of
a REDCap dataset. The collected data may contain missing values,
inconsistencies, or other potential errors that need to be identified in
order to correct them later.</p>
<p>For all the following examples we will use the raw transformed data:
<code>covican_transformed</code>.</p>
<div id="rd_query" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span>
<strong>rd_query</strong></h3>
<p>The <code>rd_query</code> function allows users to generate queries
by using a specific expression. It can be used to identify missing
values, values that fall outside the lower and upper limit of a variable
and other types of inconsistencies.</p>
<div id="output" class="section level4" number="4.3.1.1">
<h4><span class="header-section-number">4.3.1.1</span>
<em>Output</em></h4>
<p>First, we will examine the output of this function. When the
<code>rd_query</code> function is executed, it returns a list that
includes a data frame with all the queries identified and a second
element with a summary of the number of generated queries in each
specified variable for each expression applied:</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;">
Identifier
</th>
<th style="text-align:left;font-weight: bold;">
DAG
</th>
<th style="text-align:left;font-weight: bold;">
Event
</th>
<th style="text-align:left;font-weight: bold;">
Instrument
</th>
<th style="text-align:left;font-weight: bold;">
Field
</th>
<th style="text-align:left;font-weight: bold;">
Repetition
</th>
<th style="text-align:left;font-weight: bold;">
Description
</th>
<th style="text-align:left;font-weight: bold;">
Query
</th>
<th style="text-align:left;font-weight: bold;">
Code
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
100-58
</td>
<td style="text-align:left;">
Hospital 11
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
100-58-1
</td>
</tr>
<tr>
<td style="text-align:left;">
105-11
</td>
<td style="text-align:left;">
Hospital 5
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
105-11-1
</td>
</tr>
<tr>
<td style="text-align:left;">
105-56
</td>
<td style="text-align:left;">
Hospital 5
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
105-56-1
</td>
</tr>
<tr>
<td style="text-align:left;">
112-15
</td>
<td style="text-align:left;">
Hospital 10
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
112-15-1
</td>
</tr>
<tr>
<td style="text-align:left;">
117-11
</td>
<td style="text-align:left;">
Hospital 2
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
117-11-1
</td>
</tr>
<tr>
<td style="text-align:left;">
117-22
</td>
<td style="text-align:left;">
Hospital 2
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
117-22-1
</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
</tbody>
</table>
<p>The data frame is designed to aid users in locating each query in
their REDCap project. It includes information such as the record
identifier, the Data Access Group (DAG), the event in which each query
can be found, along with the name and the description of the analyzed
variable and a brief description of the query.</p>
<p>Let’s see some examples of the usability of the function in
generating different types of queries.</p>
</div>
<div id="missings" class="section level4" number="4.3.1.2">
<h4><span class="header-section-number">4.3.1.2</span>
<em>Missings</em></h4>
<p>If we want to identify missing values in the variables <em>copd</em>
and <em>age</em> in the raw transformed data, a list of required
arguments needs to be supplied. We must use the <code>variables</code>
argument to specify the variables from the database that will be
examined and the <code>expression</code> argument to describe the
expression that will be applied to those variables, in this case
‘%in%NA’ to detect missing values. Additionaly, we must use the
<code>data</code> and <code>dic</code> arguments to indicate the R
objects containing the REDCap data and dictionary, respectively. If the
REDCap project presents a longitudinal design, we should also specify
the event in which the described variables are present through the use
of the <code>event</code> argument:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>, <span class="st">&quot;age&quot;</span>),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;%in%NA&quot;</span>),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
5
</td>
</tr>
</tbody>
</table>
<p>In this case, we can observe that there are 6 missing values in the
<em>copd</em> variable and 5 missing values in <em>age</em>.</p>
</div>
<div id="missings-of-variables-with-a-branching-logic" class="section level4" number="4.3.1.3">
<h4><span class="header-section-number">4.3.1.3</span> <em>Missings of
variables with a branching logic</em></h4>
<p>Another example is when we try to identify missing values in
variables where a branching logic is employed. In this scenario, when
the conditions of the branching logic are not satisfied, by definition,
all of the values should be missing and thus queries for this specific
missing values (conditions not met) should not be reported. To adress
this, if a variable presents a branching logic, the function will issue
a warning with a message to check the <code>results</code> element of
our output:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;copd&quot;</span>, <span class="st">&quot;potassium&quot;</span>),</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;%in%NA&quot;</span>),</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span></code></pre></div>
<pre><code>Warning: Some of the variables that were checked for missings present a branching logic. 
Check the results tab of output for more details (...$results).</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
potassium
</td>
<td style="text-align:center;">
Potassium
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
31
</td>
</tr>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
5
</td>
</tr>
</tbody>
</table>
<p>As we can see, in addition to the missing values of the <em>age</em>
and <em>copd</em> variables already identified, there are 31 missing
values in the <em>potassium</em> variable. The variable
<em>potassium</em> has the following branching logic
<code>[available_analytics]=‘1’</code>, which means that we should only
identify the missing values when <em>available_analytics</em> has the
value ‘1’. To accomplish this, we can use the <code>filter</code>
argument to ensure that the condition in this branching logic is
fulfilled. Recall that, in the transformed dataset, the value ‘1’ was
changed to ‘Yes’.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;potassium&quot;</span>),</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">filter =</span> <span class="fu">c</span>(<span class="st">&quot;available_analytics==&#39;Yes&#39;&quot;</span>))</span></code></pre></div>
<pre><code>Warning: Some of the variables that were checked for missings present a branching logic. 
Check the results tab of output for more details (...$results).</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
potassium
</td>
<td style="text-align:center;">
Potassium
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
21
</td>
</tr>
</tbody>
</table>
<p>The total number of missing values changes when we use the
<code>filter</code> argument, the variable <em>potassium</em> now
presents 21 missing values instead of the previous 31 cases identified.
This means that we were identifying 10 missing values in which
<em>available_analytics</em> did not have the value <em>1</em> and,
therefore, should not be considered as missing values.</p>
</div>
<div id="expressions" class="section level4" number="4.3.1.4">
<h4><span class="header-section-number">4.3.1.4</span>
<em>Expressions</em></h4>
<p>Up until this point, we have illustrated examples where the
expression applied is for detecting missing values. But, as previously
mentioned, the <code>rd_query</code> function is also able to identify
outliers or observations that fulfill a specific condition. Hence, to
identify, for example, all the observations where <em>age</em> is
greater than 70, we should use the <code>expression</code> argument
again specifying ‘&gt;70’:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(<span class="at">variables=</span><span class="st">&quot;age&quot;</span>,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression=</span><span class="st">&quot;&gt;70&quot;</span>,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event=</span><span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">dic=</span>covican_transformed<span class="sc">$</span>dictionary,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">data=</span>covican_transformed<span class="sc">$</span>data)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be &gt;70
</td>
<td style="text-align:center;">
76
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>We can add other variables with other specific expressions in the
same function because it is designed to treat the arguments
<code>variables</code> and <code>expression</code> as vectors, so that
the element at position ‘n’ of <code>expression</code> is applied to the
element at position ‘n’ of <code>variables</code>.</p>
<p>For example, if we wanted to identify all the observations where
<em>age</em> is greater than 70 and all the observations where
<em>copd</em> is ‘Yes’ we should use:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables=</span><span class="fu">c</span>(<span class="st">&quot;age&quot;</span>, <span class="st">&quot;copd&quot;</span>),</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression=</span><span class="fu">c</span>(<span class="st">&quot;&gt;70&quot;</span>, <span class="st">&quot;==&#39;Yes&#39;&quot;</span>),</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event=</span><span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be &gt;70
</td>
<td style="text-align:center;">
76
</td>
</tr>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be equal to ‘Yes’
</td>
<td style="text-align:center;">
21
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>In a more complex scenario, for example, to identify all the
observations where <em>age</em> is greater than 70, less than 80, or is
a missing value we should use the following expression:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables=</span><span class="st">&quot;age&quot;</span>,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression=</span><span class="st">&quot;(&gt;70 &amp; &lt;80) | %in%NA&quot;</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event=</span><span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be (&gt;70 &amp; &lt;80) | missing
</td>
<td style="text-align:center;">
54
</td>
</tr>
</tbody>
</table>
</div>
<div id="special-cases" class="section level4" number="4.3.1.5">
<h4><span class="header-section-number">4.3.1.5</span> <em>Special
cases</em></h4>
<p><u>Same expression for all variables</u></p>
<p>In order to evaluate the same expression for all variables, the user
should supply just a single element for <code>expression</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>,<span class="st">&quot;age&quot;</span>,<span class="st">&quot;dm&quot;</span>),</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="st">&quot;%in%NA&quot;</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span></code></pre></div>
<pre><code>Warning: There are more variables than expressions, so the same expression was
applied to all variables</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
5
</td>
</tr>
<tr>
<td style="text-align:center;">
dm
</td>
<td style="text-align:center;">
Diabetes (treated with insulin or antidiabetic …
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
5
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>The function issues a warning every time the same expression is
applied to all variables to ensure that the user did not make a mistake
when providing the information for each argument.</p>
<p><br></p>
<p><u>Not defining an event in a dataset with multiple events</u></p>
<p>Another special case is when the data analysed corresponds to a
REDCap longitudinal project, but the event argument of the function is
not defined:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="st">&quot;copd&quot;</span>,</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="st">&quot;%in%NA&quot;</span>)</span></code></pre></div>
<pre><code>Warning: event = NA, but the dataset presents a variable that indicates the
presence of events, please specify the event.</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Follow up visit day 14+/-5d
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
152
</td>
</tr>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
</tbody>
</table>
<p>As we can see, there are 152 new missing values in the follow-up
visit because the variable <em>copd</em> it is only present in the
baseline visit. Thus, it might result in an overestimation of the number
of missing values, as the function considers all the events of the study
if no event is specified.</p>
<p><br></p>
<p>The function will issue a warning if it detects that the REDCap
project contains multiple events and the <code>event</code> argument is
not specified.</p>
</div>
<div id="additional-arguments-1" class="section level4" number="4.3.1.6">
<h4><span class="header-section-number">4.3.1.6</span> <em>Additional
arguments</em></h4>
<p><u>variable_names, query_name, instrument</u></p>
<p>These arguments allow users to customize the data frame returned by
the function. We can change the variables names using the
<code>variables_names</code> argument, alter the description of the
query using the <code>query_name</code> argument or even change the name
of the instrument using the <code>instrument</code> argument:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>example<span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>),</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">variables_names =</span> <span class="fu">c</span>(<span class="st">&quot;Chronic obstructive pulmonary disease (Yes/No)&quot;</span>),</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>),</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">query_name =</span> <span class="fu">c</span>(<span class="st">&quot;COPD is a missing value.&quot;</span>),</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">instrument =</span> <span class="fu">c</span>(<span class="st">&quot;Admission&quot;</span>),</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span></code></pre></div>
<p>Output:</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;">
Identifier
</th>
<th style="text-align:left;font-weight: bold;">
DAG
</th>
<th style="text-align:left;font-weight: bold;">
Event
</th>
<th style="text-align:left;font-weight: bold;">
Instrument
</th>
<th style="text-align:left;font-weight: bold;">
Field
</th>
<th style="text-align:left;font-weight: bold;">
Repetition
</th>
<th style="text-align:left;font-weight: bold;">
Description
</th>
<th style="text-align:left;font-weight: bold;">
Query
</th>
<th style="text-align:left;font-weight: bold;">
Code
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
100-58
</td>
<td style="text-align:left;">
Hospital 11
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Admission
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease (Yes/No)
</td>
<td style="text-align:left;">
COPD is a missing value.
</td>
<td style="text-align:left;">
100-58-1
</td>
</tr>
</tbody>
</table></li>
</ul>
<p><br></p>
<p><u>negate</u></p>
<p>This argument can be used to negate the expression applied to the
variables. For example, if we want to identify all the non missing
values of the variable <em>copd</em>, we can apply the expression
‘%in%NA’ which normally would report the missing values and add
<code>negate = TRUE</code>, so the result will be the number of non
missing values in <em>copd</em>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="st">&quot;copd&quot;</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="st">&quot;%in%NA&quot;</span>,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">negate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should be missing
</td>
<td style="text-align:center;">
184
</td>
</tr>
</tbody>
</table>
<p>There are 184 non missing values in the variable <em>copd</em>.</p>
<p><br></p>
<p><u>addTo</u></p>
<p>In order to keep all queries in the same R object, we can use the
<code>addTo</code> argument to specify the output of another query
dataset.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>example2 <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">variables =</span> <span class="st">&quot;age&quot;</span>,</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">expression =</span> <span class="st">&quot;%in%NA&quot;</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">addTo =</span> example)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>example2<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should be missing
</td>
<td style="text-align:center;">
184
</td>
</tr>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
5
</td>
</tr>
</tbody>
</table>
<p>We have joined our former output of 184 non missing values in the
variable <em>copd</em> with the new query dataset composed by the 5
missing values of the variable <em>age</em>.</p>
<p><br></p>
<p><u>report_title</u></p>
<p>To customize the title of the summary of queries, we can use the
<code>report_title</code> argument:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>, <span class="st">&quot;age&quot;</span>),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;&lt;20&quot;</span>),</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">report_title =</span> <span class="st">&quot;Missing COPD values in the baseline event&quot;</span>)</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Missing COPD values in the baseline event
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
</tbody>
</table>
<p>The default title of the summary is “Report of queries” but we have
changed it to “Missing COPD values in the baseline event”.</p>
<p><br></p>
<p><u>report_zeros</u></p>
<p>By default, the function will only report, in the summary of queries,
variables with at least one query and will omit those with zero queries.
To include these omitted variables in the summary, we can use the
<code>report_zeros</code> argument:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>, <span class="st">&quot;age&quot;</span>),</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;&lt;20&quot;</span>),</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">report_zeros =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
6
</td>
</tr>
<tr>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
This value should not be &lt;20
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
<p>The variable <em>age</em> is reported in the summary in spite of not
having any queries identified.</p>
<p><br></p>
<p><u>by_dag</u></p>
<p>If the REDCap project has Data Access Groups (DAGs), it might be of
our interest to report the summary by each one of the DAGs. To do that,
we can use the <code>by_dag</code> argument:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_query</span>(covican_transformed,</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;copd&quot;</span>, <span class="st">&quot;age&quot;</span>),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">expression =</span> <span class="fu">c</span>(<span class="st">&quot;%in%NA&quot;</span>, <span class="st">&quot;&gt;60&quot;</span>),</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;baseline_visit_arm_1&quot;</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">by_dag =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Now we can choose to see the report of a specific DAG, for example,
the summary of the generated queries for the <em>Hospital 2</em>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Printing results</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results<span class="sc">$</span><span class="st">`</span><span class="at">Hospital 2</span><span class="st">`</span></span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
DAG
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Variables
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Event
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Query
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Hospital 2
</td>
<td style="text-align:center;">
age
</td>
<td style="text-align:center;">
Age
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be &gt;60
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
Hospital 2
</td>
<td style="text-align:center;">
copd
</td>
<td style="text-align:center;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
The value should not be missing
</td>
<td style="text-align:center;">
2
</td>
</tr>
</tbody>
</table>
<p>For this DAG, there are 3 values of <em>age</em> bigger than 60 and 2
missing values in the variable <em>copd</em>.</p>
<p><br></p>
</div>
</div>
<div id="rd_event" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span>
<strong>rd_event</strong></h3>
<p>When working with a longitudinal REDCap project (presence of events),
the exported data has a structure where each row represents one event
per record. However, by default, REDCap will not export the
corresponding rows of the events that have no collected data. So, if we
try to identify missing values in variables that are inside a missing
event for some records using the <code>rd_query</code> function, these
missing values will not be identified because they do not exist in the
exported data. The <code>rd_event</code> function can be used to point
out in how many records an event does not exist:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_event</span>(covican_transformed,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;follow_up_visit_da_arm_1&quot;</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Events
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
follow_up_visit_da_arm_1
</td>
<td style="text-align:center;">
Follow up visit day 14+/-5d
</td>
<td style="text-align:center;">
38
</td>
</tr>
</tbody>
</table>
<p>There are a total of 38 events per record without any row
corresponding to the event <em>Follow up visit day 14+/-5d</em>. Thus,
when searching for missing values of variables in the <em>Follow up
visit day 14+/-5d</em> event, we need to consider that there will be 38
additional missing values which will not be accounted for by
<code>rd_query</code>.</p>
<p><br></p>
<p>It might happen that an event is not mandatory for all records so we
only want to check if the event is missing in a subgroup of records. For
example, in the <em>COVICAN</em> study only patients satisfying the
inclusion and exclusion criteria would have to perform the follow up
visit. Therefore, to check if the follow up event is missing only in the
records that fulfill the inclusion and exclusion criteria, we can use
the <code>filter</code> argument of the <code>rd_event</code>
function:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_event</span>(covican_transformed,</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="st">&quot;follow_up_visit_da_arm_1&quot;</span>,</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">filter =</span> <span class="st">&quot;screening_fail_crit==0&quot;</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Events
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
follow_up_visit_da_arm_1
</td>
<td style="text-align:center;">
Follow up visit day 14+/-5d
</td>
<td style="text-align:center;">
34
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Like the <code>rd_query</code> function, this function also treats
the argument <code>event</code> as a vector allowing us to check for
multiple missing events at the same time.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>example <span class="ot">&lt;-</span> <span class="fu">rd_event</span>(covican_transformed,</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">event =</span> <span class="fu">c</span>(<span class="st">&quot;baseline_visit_arm_1&quot;</span>,<span class="st">&quot;follow_up_visit_da_arm_1&quot;</span>),</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">filter =</span> <span class="st">&quot;screening_fail_crit==0&quot;</span>,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">report_zeros =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>example<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Report of queries
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
Events
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Description
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
follow_up_visit_da_arm_1
</td>
<td style="text-align:center;">
Follow up visit day 14+/-5d
</td>
<td style="text-align:center;">
34
</td>
</tr>
<tr>
<td style="text-align:center;">
baseline_visit_arm_1
</td>
<td style="text-align:center;">
Baseline visit
</td>
<td style="text-align:center;">
0
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Note: This function also has the arguments <code>query_name</code>,
<code>addTo</code>, <code>report_title</code> and
<code>report_zeros</code> that work in the same way as in the examples
previously mentioned in section 4.3.1.6.</p>
</div>
<div id="check_queries" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span>
<strong>check_queries</strong></h3>
<p>Once the process of identifying queries is complete, the typical
approach would be to adress them by modifying the original dataset in
REDCap and re-run the query identification process generating a new
query dataset.</p>
<p>The <code>check_queries</code> function compares the previous query
dataset with the new one by using the arguments <code>old</code> and
<code>new</code>, respectively. The output remains a list with 2 items,
but the data frame containing the information for each query will now
have an additional column (“Modification”) indicating which queries are
new, which have been modified, which have been corrected, and which
remain unchanged. Besides, the summary will show the number of queries
in each one of these categories:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> <span class="fu">check_queries</span>(<span class="at">old =</span> example<span class="sc">$</span>queries, </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">new =</span> new_example<span class="sc">$</span>queries)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>check<span class="sc">$</span>results</span></code></pre></div>
<table class="table table-striped table-condensed" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
Comparison report
</caption>
<thead>
<tr>
<th style="text-align:center;border-bottom: 1px solid grey">
State
</th>
<th style="text-align:center;border-bottom: 1px solid grey">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Pending
</td>
<td style="text-align:center;">
7
</td>
</tr>
<tr>
<td style="text-align:center;">
Solved
</td>
<td style="text-align:center;">
3
</td>
</tr>
<tr>
<td style="text-align:center;">
Miscorrected
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
New
</td>
<td style="text-align:center;">
1
</td>
</tr>
</tbody>
</table>
<p>There are 7 unchanged queries, 3 corrected queries, 1 modified query,
and 1 new query between the previous and the new query dataset.</p>
<p>Note: The “Miscorrected” category includes queries that belong to the
same combination of record identifier and variable in both the old and
new reports, but with a different reason. For instance, if a variable
had a missing value in the old report, but in the new report shows a
value outside the established range, it would be classified as
“Miscorrected”.</p>
<p><br></p>
<p>Query control output:</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;font-weight: bold;">
Identifier
</th>
<th style="text-align:left;font-weight: bold;">
DAG
</th>
<th style="text-align:left;font-weight: bold;">
Event
</th>
<th style="text-align:left;font-weight: bold;">
Instrument
</th>
<th style="text-align:left;font-weight: bold;">
Field
</th>
<th style="text-align:left;font-weight: bold;">
Repetition
</th>
<th style="text-align:left;font-weight: bold;">
Description
</th>
<th style="text-align:left;font-weight: bold;">
Query
</th>
<th style="text-align:left;font-weight: bold;">
Code
</th>
<th style="text-align:left;font-weight: bold;">
Modification
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
100-58
</td>
<td style="text-align:left;">
Hospital 11
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
100-58-1
</td>
<td style="text-align:left;">
Pending
</td>
</tr>
<tr>
<td style="text-align:left;">
100-79
</td>
<td style="text-align:left;">
Hospital 11
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
100-79-1
</td>
<td style="text-align:left;">
New
</td>
</tr>
<tr>
<td style="text-align:left;">
102-113
</td>
<td style="text-align:left;">
Hospital 24
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Demographics
</td>
<td style="text-align:left;">
age
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Age
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
102-113-1
</td>
<td style="text-align:left;">
Pending
</td>
</tr>
<tr>
<td style="text-align:left;">
105-11
</td>
<td style="text-align:left;">
Hospital 5
</td>
<td style="text-align:left;">
Baseline visit
</td>
<td style="text-align:left;">
Comorbidities
</td>
<td style="text-align:left;">
copd
</td>
<td style="text-align:left;">
<ul>
<li></td>
<td style="text-align:left;">
Chronic obstructive pulmonary disease
</td>
<td style="text-align:left;">
The value is NA and it should not be missing
</td>
<td style="text-align:left;">
105-11-1
</td>
<td style="text-align:left;">
Pending
</td>
</tr>
</tbody>
</table></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
